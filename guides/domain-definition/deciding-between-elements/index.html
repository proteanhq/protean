
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.proteanhq.com/guides/domain-definition/deciding-between-elements/">
      
      
        <link rel="prev" href="../value-objects/">
      
      
        <link rel="next" href="../events/">
      
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Deciding Between Elements - Protean</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.90ef4c13.css">
        <style>:root{--md-text-font:"Lato";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deciding-between-elements" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Protean" class="md-header__button md-logo" aria-label="Protean" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Protean
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deciding Between Elements
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/proteanhq/protean" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    proteanhq/protean
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
  
    
  
  Protean

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../getting-started/installation/" class="md-tabs__link">
          
  
  
    
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../core-concepts/ddd/" class="md-tabs__link">
          
  
  
    
  
  Core Concepts

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../adapters/" class="md-tabs__link">
          
  
  
    
  
  Adapters

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../patterns/" class="md-tabs__link">
          
  
  
    
  
  Patterns

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../glossary/" class="md-tabs__link">
        
  
  
    
  
  Glossary

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../community/" class="md-tabs__link">
          
  
  
    
  
  Community

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Protean" class="md-nav__button md-logo" aria-label="Protean" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    Protean
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/proteanhq/protean" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    proteanhq/protean
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../.." class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Protean
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Essentials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Essentials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../object-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Object Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Identity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Domain Model
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Domain Model
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../compose-a-domain/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Compose a Domain
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Define Concepts
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Define Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../fields/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Fields
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aggregates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aggregates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Entities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relationships/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Expressing Relationships
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../value-objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Value Objects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Deciding Between Elements
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Deciding Between Elements
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#understanding-the-core-differences" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Core Differences
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding the Core Differences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aggregates" class="md-nav__link">
    <span class="md-ellipsis">
      Aggregates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entities" class="md-nav__link">
    <span class="md-ellipsis">
      Entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Value Objects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision-checklists" class="md-nav__link">
    <span class="md-ellipsis">
      Decision Checklists
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Decision Checklists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#choose-an-aggregate-when" class="md-nav__link">
    <span class="md-ellipsis">
      Choose an Aggregate when:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choose-an-entity-when" class="md-nav__link">
    <span class="md-ellipsis">
      Choose an Entity when:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choose-a-value-object-when" class="md-nav__link">
    <span class="md-ellipsis">
      Choose a Value Object when:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practical-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Practical Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Practical Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#e-commerce-domain-examples" class="md-nav__link">
    <span class="md-ellipsis">
      E-commerce Domain Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="E-commerce Domain Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#order-aggregate" class="md-nav__link">
    <span class="md-ellipsis">
      Order (Aggregate)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orderitem-entity" class="md-nav__link">
    <span class="md-ellipsis">
      OrderItem (Entity)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#money-value-object" class="md-nav__link">
    <span class="md-ellipsis">
      Money (Value Object)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blog-domain-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Blog Domain Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blog Domain Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#post-aggregate" class="md-nav__link">
    <span class="md-ellipsis">
      Post (Aggregate)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comment-entity" class="md-nav__link">
    <span class="md-ellipsis">
      Comment (Entity)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#email-value-object" class="md-nav__link">
    <span class="md-ellipsis">
      Email (Value Object)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-code-smells-and-anti-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Code Smells and Anti-Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Code Smells and Anti-Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aggregate-red-flags" class="md-nav__link">
    <span class="md-ellipsis">
      🚩 Aggregate Red Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entity-red-flags" class="md-nav__link">
    <span class="md-ellipsis">
      🚩 Entity Red Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value-object-red-flags" class="md-nav__link">
    <span class="md-ellipsis">
      🚩 Value Object Red Flags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#team-decision-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Team Decision Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Team Decision Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Reference
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-by-step-process" class="md-nav__link">
    <span class="md-ellipsis">
      Step-by-Step Process
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-identity-check" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Identity Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-aggregate-boundary-check" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Aggregate Boundary Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-aggregate-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Aggregate Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-value-object-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Value Object Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-entity-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Entity Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-in-doubt" class="md-nav__link">
    <span class="md-ellipsis">
      When in Doubt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="When in Doubt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Default Guidelines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../domain-behavior/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Add Behavior
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    App Layer
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            App Layer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../change-state/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Change State
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../change-state/persist-aggregates/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Persist State
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../consume-state/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Consume State Changes
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Utilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../cli/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    CLI
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../server/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Server
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../core-concepts/ddd/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Core Concepts
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../adapters/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Adapters
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../patterns/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Patterns
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../community/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#understanding-the-core-differences" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Core Differences
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding the Core Differences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aggregates" class="md-nav__link">
    <span class="md-ellipsis">
      Aggregates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entities" class="md-nav__link">
    <span class="md-ellipsis">
      Entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Value Objects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision-checklists" class="md-nav__link">
    <span class="md-ellipsis">
      Decision Checklists
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Decision Checklists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#choose-an-aggregate-when" class="md-nav__link">
    <span class="md-ellipsis">
      Choose an Aggregate when:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choose-an-entity-when" class="md-nav__link">
    <span class="md-ellipsis">
      Choose an Entity when:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choose-a-value-object-when" class="md-nav__link">
    <span class="md-ellipsis">
      Choose a Value Object when:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practical-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Practical Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Practical Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#e-commerce-domain-examples" class="md-nav__link">
    <span class="md-ellipsis">
      E-commerce Domain Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="E-commerce Domain Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#order-aggregate" class="md-nav__link">
    <span class="md-ellipsis">
      Order (Aggregate)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orderitem-entity" class="md-nav__link">
    <span class="md-ellipsis">
      OrderItem (Entity)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#money-value-object" class="md-nav__link">
    <span class="md-ellipsis">
      Money (Value Object)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blog-domain-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Blog Domain Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blog Domain Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#post-aggregate" class="md-nav__link">
    <span class="md-ellipsis">
      Post (Aggregate)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comment-entity" class="md-nav__link">
    <span class="md-ellipsis">
      Comment (Entity)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#email-value-object" class="md-nav__link">
    <span class="md-ellipsis">
      Email (Value Object)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-code-smells-and-anti-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Code Smells and Anti-Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Code Smells and Anti-Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aggregate-red-flags" class="md-nav__link">
    <span class="md-ellipsis">
      🚩 Aggregate Red Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entity-red-flags" class="md-nav__link">
    <span class="md-ellipsis">
      🚩 Entity Red Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value-object-red-flags" class="md-nav__link">
    <span class="md-ellipsis">
      🚩 Value Object Red Flags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#team-decision-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Team Decision Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Team Decision Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Reference
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-by-step-process" class="md-nav__link">
    <span class="md-ellipsis">
      Step-by-Step Process
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-identity-check" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Identity Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-aggregate-boundary-check" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Aggregate Boundary Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-aggregate-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Aggregate Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-value-object-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Value Object Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-entity-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Entity Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-in-doubt" class="md-nav__link">
    <span class="md-ellipsis">
      When in Doubt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="When in Doubt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Default Guidelines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="deciding-between-elements">Deciding Between Elements</h1>
<p>One of the most critical decisions in Domain-Driven Design is choosing the right domain element type for your concepts. This guide provides practical checklists, examples, and decision flows to help you determine whether a domain concept should be modeled as an <strong>Aggregate</strong>, an <strong>Entity</strong>, or a <strong>Value Object</strong>.</p>
<h2 id="understanding-the-core-differences">Understanding the Core Differences</h2>
<h3 id="aggregates">Aggregates</h3>
<ul>
<li><strong>Purpose</strong>: Act as consistency boundaries and transaction roots</li>
<li><strong>Identity</strong>: Have unique identity (like entities)</li>
<li><strong>Mutability</strong>: Mutable - can change state over time</li>
<li><strong>Persistence</strong>: Directly persisted and retrieved from storage</li>
<li><strong>Access</strong>: Accessed directly from outside the domain</li>
<li><strong>Lifecycle</strong>: Manage the lifecycle of contained entities and value objects</li>
</ul>
<h3 id="entities">Entities</h3>
<ul>
<li><strong>Purpose</strong>: Represent domain concepts with unique identity</li>
<li><strong>Identity</strong>: Have unique identity that persists through state changes</li>
<li><strong>Mutability</strong>: Mutable - can change state over time</li>
<li><strong>Persistence</strong>: Persisted through their parent aggregate</li>
<li><strong>Access</strong>: Only accessible through their containing aggregate</li>
<li><strong>Lifecycle</strong>: Managed by their containing aggregate</li>
</ul>
<h3 id="value-objects">Value Objects</h3>
<ul>
<li><strong>Purpose</strong>: Represent descriptive aspects without identity</li>
<li><strong>Identity</strong>: No unique identity - defined by their attributes</li>
<li><strong>Mutability</strong>: Immutable - cannot be changed once created</li>
<li><strong>Persistence</strong>: Persisted as part of their containing entity/aggregate</li>
<li><strong>Access</strong>: Embedded within entities or aggregates</li>
<li><strong>Lifecycle</strong>: Managed by their containing entity/aggregate</li>
</ul>
<h2 id="decision-checklists">Decision Checklists</h2>
<h3 id="choose-an-aggregate-when">Choose an Aggregate when:</h3>
<ul>
<li><strong>It's a core business concept</strong> - The concept is central to your domain and represents a significant business entity</li>
<li><strong>It needs direct access</strong> - External systems or application services need to interact with it directly</li>
<li><strong>It manages a consistency boundary</strong> - Business rules require that certain data changes happen together atomically</li>
<li><strong>It controls other entities</strong> - The concept needs to manage the lifecycle of related entities</li>
<li><strong>It's a transaction root</strong> - Operations on this concept and its related data should be transactional</li>
<li><strong>It has complex business behavior</strong> - The concept encapsulates significant business logic and rules</li>
<li><strong>It generates domain events</strong> - Changes to this concept trigger events that other parts of the system care about</li>
</ul>
<h3 id="choose-an-entity-when">Choose an Entity when:</h3>
<ul>
<li><strong>It has unique identity</strong> - The concept has a distinct identity that remains the same throughout its lifecycle</li>
<li><strong>Identity matters more than attributes</strong> - Two instances with the same attributes but different identities are considered different</li>
<li><strong>It belongs to an aggregate</strong> - The concept is part of a larger aggregate's consistency boundary</li>
<li><strong>It needs to change over time</strong> - The concept's attributes can be modified while maintaining its identity</li>
<li><strong>It has entity-specific behavior</strong> - The concept has methods that operate on its own state</li>
<li><strong>It's accessed through an aggregate</strong> - The concept doesn't need direct external access</li>
</ul>
<h3 id="choose-a-value-object-when">Choose a Value Object when:</h3>
<ul>
<li><strong>Identity doesn't matter</strong> - Two instances with the same attributes are considered identical</li>
<li><strong>It's descriptive</strong> - The concept describes or measures something (e.g., money, address, email)</li>
<li><strong>It should be immutable</strong> - Once created, the concept's values shouldn't change</li>
<li><strong>It encapsulates validation rules</strong> - The concept has specific rules about what constitutes valid values</li>
<li><strong>It's frequently shared</strong> - Multiple entities might use the same value object instance</li>
<li><strong>It represents a atomic concept</strong> - The concept is meaningful only when all its attributes are considered together</li>
<li><strong>It simplifies the domain model</strong> - Using this concept as a value object reduces complexity</li>
</ul>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="e-commerce-domain-examples">E-commerce Domain Examples</h3>
<h4 id="order-aggregate">Order (Aggregate)</h4>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="n">order_number</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_id</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="s1">&#39;confirmed&#39;</span><span class="p">,</span> <span class="s1">&#39;shipped&#39;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;pending&#39;</span><span class="p">)</span>
    <span class="n">total_amount</span> <span class="o">=</span> <span class="n">ValueObject</span><span class="p">(</span><span class="n">Money</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">DateTime</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">)</span>
</code></pre></div>
<p><strong>Why Aggregate?</strong></p>
<ul>
<li>✅ Core business concept that needs direct access</li>
<li>✅ Controls consistency boundary (order items, payments, shipping)</li>
<li>✅ Transaction root for order-related operations</li>
<li>✅ Generates domain events (OrderCreated, OrderShipped, etc.)</li>
</ul>
<h4 id="orderitem-entity">OrderItem (Entity)</h4>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">entity</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderItem</span><span class="p">:</span>
    <span class="n">product_id</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">quantity</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">unit_price</span> <span class="o">=</span> <span class="n">ValueObject</span><span class="p">(</span><span class="n">Money</span><span class="p">)</span>
    <span class="n">line_total</span> <span class="o">=</span> <span class="n">ValueObject</span><span class="p">(</span><span class="n">Money</span><span class="p">)</span>
</code></pre></div>
<p><strong>Why Entity?</strong></p>
<ul>
<li>✅ Has unique identity (different from other order items)</li>
<li>✅ Belongs to Order aggregate's consistency boundary</li>
<li>✅ Mutable (quantity, price can change)</li>
<li>✅ Accessed through Order aggregate</li>
</ul>
<h4 id="money-value-object">Money (Value Object)</h4>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">value_object</span>  
<span class="k">class</span><span class="w"> </span><span class="nc">Money</span><span class="p">:</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">currency</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">currency</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">currency</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot add different currencies&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Money</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">currency</span><span class="p">)</span>
</code></pre></div>
<p><strong>Why Value Object?</strong></p>
<ul>
<li>✅ Identity doesn't matter (two $10 USD are identical)</li>
<li>✅ Immutable by design</li>
<li>✅ Encapsulates validation rules (currency matching)</li>
<li>✅ Frequently shared across entities</li>
<li>✅ Atomic concept (amount + currency together)</li>
</ul>
<h3 id="blog-domain-examples">Blog Domain Examples</h3>
<h4 id="post-aggregate">Post (Aggregate)</h4>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Post</span><span class="p">:</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
    <span class="n">author_id</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">published_at</span> <span class="o">=</span> <span class="n">DateTime</span><span class="p">()</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;draft&#39;</span><span class="p">,</span> <span class="s1">&#39;published&#39;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;draft&#39;</span><span class="p">)</span>
</code></pre></div>
<h4 id="comment-entity">Comment (Entity)</h4>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">entity</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Post</span><span class="p">)</span>  
<span class="k">class</span><span class="w"> </span><span class="nc">Comment</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">author_id</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">DateTime</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">)</span>
</code></pre></div>
<h4 id="email-value-object">Email (Value Object)</h4>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">value_object</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Email</span><span class="p">:</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;@&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid email format&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="common-code-smells-and-anti-patterns">Common Code Smells and Anti-Patterns</h2>
<h3 id="aggregate-red-flags">🚩 Aggregate Red Flags</h3>
<p><strong>Too Many Aggregates</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ Bad: Making every entity an aggregate</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span>
<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span> <span class="o">...</span>

<span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span>  
<span class="k">class</span><span class="w"> </span><span class="nc">Address</span><span class="p">:</span> <span class="o">...</span>  <span class="c1"># Should be Value Object</span>

<span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Phone</span><span class="p">:</span> <span class="o">...</span>    <span class="c1"># Should be Value Object</span>
</code></pre></div></p>
<p><strong>God Aggregate</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ Bad: Aggregate trying to manage too much</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="c1"># ... order fields ...</span>
    <span class="n">customer_details</span> <span class="o">=</span> <span class="n">HasOne</span><span class="p">(</span><span class="n">Customer</span><span class="p">)</span>      <span class="c1"># Should reference by ID</span>
    <span class="n">inventory_items</span> <span class="o">=</span> <span class="n">HasMany</span><span class="p">(</span><span class="n">InventoryItem</span><span class="p">)</span> <span class="c1"># Wrong aggregate boundary</span>
    <span class="n">payment_processor</span> <span class="o">=</span> <span class="n">HasOne</span><span class="p">(</span><span class="n">PaymentGateway</span><span class="p">)</span> <span class="c1"># Infrastructure concern</span>
</code></pre></div></p>
<p><strong>Missing Aggregate</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ Bad: Entity without an aggregate</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">entity</span>  <span class="c1"># Missing part_of parameter</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Comment</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="c1"># Error: Entity needs to be associated with an Aggregate</span>
</code></pre></div></p>
<h3 id="entity-red-flags">🚩 Entity Red Flags</h3>
<p><strong>Entity as Value Object</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ Bad: Treating entities like value objects</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process_order</span><span class="p">(</span><span class="n">order_item_data</span><span class="p">):</span>
    <span class="c1"># Creating new entity instead of referencing existing one</span>
    <span class="n">item</span> <span class="o">=</span> <span class="n">OrderItem</span><span class="p">(</span><span class="o">**</span><span class="n">order_item_data</span><span class="p">)</span>  
    <span class="c1"># Should retrieve existing entity by ID</span>
</code></pre></div></p>
<p><strong>Direct Entity Access</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ Bad: Accessing entity directly instead of through aggregate</span>
<span class="n">item</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="n">get_order_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>  <span class="c1"># Wrong!</span>
<span class="c1"># Should be: order.get_item(item_id)</span>
</code></pre></div></p>
<h3 id="value-object-red-flags">🚩 Value Object Red Flags</h3>
<p><strong>Mutable Value Object</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ Bad: Trying to modify value object</span>
<span class="n">address</span> <span class="o">=</span> <span class="n">Address</span><span class="p">(</span><span class="n">street</span><span class="o">=</span><span class="s2">&quot;123 Main St&quot;</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s2">&quot;NYC&quot;</span><span class="p">)</span>
<span class="n">address</span><span class="o">.</span><span class="n">street</span> <span class="o">=</span> <span class="s2">&quot;456 Oak Ave&quot;</span>  <span class="c1"># Will raise IncorrectUsageError</span>
</code></pre></div></p>
<p><strong>Value Object with Identity</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ Bad: Adding identity to value object</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">value_object</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Money</span><span class="p">:</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Auto</span><span class="p">()</span>  <span class="c1"># Will raise IncorrectUsageError</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">()</span>
    <span class="n">currency</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
</code></pre></div></p>
<p><strong>Primitive Obsession</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ Bad: Using primitives instead of value objects</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span>
<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>  <span class="c1"># Should be ValueObject(Email)</span>
    <span class="n">phone</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>  <span class="c1"># Should be ValueObject(Phone) </span>
    <span class="n">address_line1</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>  <span class="c1"># Should be ValueObject(Address)</span>
    <span class="n">address_line2</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">city</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">postal_code</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
</code></pre></div></p>
<h2 id="team-decision-flow">Team Decision Flow</h2>
<p>Use this lightweight process for team discussions about domain element choices:</p>
<h3 id="quick-reference">Quick Reference</h3>
<p>For rapid decisions, use this simplified flowchart:</p>
<pre class="mermaid"><code>flowchart TD
    A["Domain Concept"] --&gt; B{{"Has Identity?"}}
    B --&gt;|No| C["Value Object"]
    B --&gt;|Yes| D{{"Direct Access?"}}
    D --&gt;|Yes| E["Aggregate"]
    D --&gt;|No| F["Entity"]

    classDef question fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    classDef aggregate fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef entity fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef valueObject fill:#fff8e1,stroke:#f57f17,stroke-width:2px

    class B,D question
    class E aggregate
    class F entity
    class C valueObject</code></pre>
<h3 id="step-by-step-process">Step-by-Step Process</h3>
<h4 id="step-1-identity-check">Step 1: Identity Check</h4>
<p>Does this concept have a unique identity that matters to the business?</p>
<p><em>If no → Consider Value Object (go to Step 4)</em></p>
<p><em>If yes → Continue to Step 2</em></p>
<h4 id="step-2-aggregate-boundary-check">Step 2: Aggregate Boundary Check</h4>
<p>Does this concept need to be accessed directly from outside the domain?</p>
<p><em>If yes → Consider Aggregate (go to Step 3)</em></p>
<p><em>If no → Consider Entity (go to Step 5)</em></p>
<h4 id="step-3-aggregate-validation">Step 3: Aggregate Validation</h4>
<ul>
<li>Is this a core business concept?</li>
<li>Does it need to control a consistency boundary?</li>
<li>Will it manage other entities/value objects?</li>
<li>Does it generate important domain events?</li>
</ul>
<p><em>If 3+ yes → Aggregate. Otherwise, reconsider Entity.</em></p>
<h4 id="step-4-value-object-validation">Step 4: Value Object Validation</h4>
<ul>
<li>Can this be immutable?</li>
<li>Is identity truly irrelevant?</li>
<li>Does it describe or measure something?</li>
<li>Are instances with same values identical?</li>
</ul>
<p><em>If 3+ yes → Value Object. Otherwise, reconsider Entity.</em></p>
<h4 id="step-5-entity-validation">Step 5: Entity Validation</h4>
<ul>
<li>Does it belong to a clear aggregate?</li>
<li>Does it need to change over time?</li>
<li>Is identity more important than attributes?</li>
<li>Does it have entity-specific behavior?</li>
</ul>
<p><em>If 3+ yes → Entity. Otherwise, reconsider the design.</em></p>
<h2 id="when-in-doubt">When in Doubt</h2>
<h3 id="default-guidelines">Default Guidelines</h3>
<ol>
<li>
<p><strong>Start with Value Object</strong> - If you're unsure, try modeling as a value object first. It's easier to promote to entity/aggregate later than to demote.</p>
</li>
<li>
<p><strong>Favor composition</strong> - Prefer value objects embedded in entities over creating new entities.</p>
</li>
<li>
<p><strong>Question aggregates</strong> - Only create aggregates when you have a clear business justification for direct access and consistency boundaries.</p>
</li>
<li>
<p><strong>Context matters</strong> - The same concept might be different element types in different bounded contexts.</p>
</li>
</ol>
<h3 id="common-patterns">Common Patterns</h3>
<ul>
<li><strong>Person</strong>: Usually Entity (has identity that matters)</li>
<li><strong>Address</strong>: Usually Value Object (descriptive, no identity)</li>
<li><strong>Money/Price</strong>: Always Value Object (amount + currency)</li>
<li><strong>Email/Phone</strong>: Usually Value Object (format validation)</li>
<li><strong>Order/Invoice</strong>: Usually Aggregate (transaction boundary)</li>
<li><strong>Line Items</strong>: Usually Entity (part of order/invoice)</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember: These decisions aren't permanent. As your understanding of the domain evolves, you can refactor elements to better reflect the business reality. The key is to make informed decisions based on the business requirements and domain understanding rather than technical convenience.</p>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../value-objects/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Value Objects">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Value Objects
              </div>
            </div>
          </a>
        
        
          
          <a href="../events/" class="md-footer__link md-footer__link--next" aria-label="Next: Events">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Events
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019 - 2025 Subhash Bhushan
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.tooltips", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>