
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.proteanhq.com/patterns/design-events-for-consumers/">
      
      
        <link rel="prev" href="../replace-primitives-with-value-objects/">
      
      
        <link rel="next" href="../idempotent-event-handlers/">
      
      
        
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Design Events for Consumers - Protean</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.56f7ac64.css">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#design-events-for-consumers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Protean" class="md-header__button md-logo" aria-label="Protean" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Protean
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Design Events for Consumers
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/proteanhq/protean" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    proteanhq/protean
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
    
  
  Protean

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guides/getting-started/installation/" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guides/" class="md-tabs__link">
          
  
  
    
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../concepts/" class="md-tabs__link">
          
  
  
    
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Patterns & Recipes

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../glossary/" class="md-tabs__link">
        
  
  
    
  
  Glossary

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../community/" class="md-tabs__link">
          
  
  
    
  
  Community

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Protean" class="md-nav__button md-logo" aria-label="Protean" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Protean
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/proteanhq/protean" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    proteanhq/protean
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Protean
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Protean
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start-here/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Start Here
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/philosophy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Philosophy &amp; Design Principles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-do-i/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How Do I...?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/getting-started/tutorial/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Tutorial
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorial
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Part I - Building the Domain
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Part I - Building the Domain
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/01-your-first-aggregate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Your First Aggregate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/02-fields-and-value-objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Rich Fields and Value Objects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/03-entities-and-associations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Entities and Associations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/04-business-rules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Business Rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Part II - Making It Event-Driven
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Part II - Making It Event-Driven
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/05-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. Commands and Handlers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/06-events-and-reactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. Events and Reactions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_4" id="__nav_2_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Part III - Read Models and Persistence
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Part III - Read Models and Persistence
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/07-projections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7. Projections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/08-persistence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8. Connecting a Real Database
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_5" id="__nav_2_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Part IV - Testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Part IV - Testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/09-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9. Testing Your Domain
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/tutorial/10-whats-next/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10. What Comes Next
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/pathways/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Choose a Path
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Choose a Path
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pathways/ddd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain-Driven Design with Protean
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pathways/cqrs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CQRS with Protean
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pathways/event-sourcing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Sourcing with Protean
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/compose-a-domain/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Set Up the Domain
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Set Up the Domain
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/compose-a-domain/register-elements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Register elements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/compose-a-domain/initialize-domain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Initialize the domain
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/compose-a-domain/activate-domain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Activate the domain
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/compose-a-domain/when-to-compose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    When to compose
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/domain-definition/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Model Your Domain
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Model Your Domain
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-definition/aggregates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Aggregates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-definition/entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-definition/value-objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Value Objects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-definition/relationships/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Expressing Relationships
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-definition/events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Events
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-definition/deciding-between-elements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deciding Between Elements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/domain-behavior/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Add Rules and Behavior
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Add Rules and Behavior
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-behavior/validations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic Validations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-behavior/invariants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Invariants
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-behavior/aggregate-mutation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mutating Aggregates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-behavior/raising-events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Raising Events
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/domain-behavior/domain-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/change-state/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Change State
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Change State
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/change-state/application-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/change-state/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/change-state/command-handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Handlers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/change-state/repositories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Repositories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/change-state/persist-aggregates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persist Aggregates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/change-state/retrieve-aggregates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieve Aggregates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/change-state/temporal-queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Temporal Queries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/change-state/unit-of-work/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unit of Work
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/consume-state/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    React to Changes
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    React to Changes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/consume-state/event-handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Handlers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/consume-state/process-managers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process Managers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/consume-state/projections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Managing Projections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/consume-state/subscribers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Subscribers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/consume-state/event-upcasting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Upcasting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/fastapi/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Expose Your Domain
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Expose Your Domain
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/server/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Run the Server
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Run the Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/testing/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Test Your Application
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Test Your Application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/testing/domain-model-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain Model Tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/testing/application-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/testing/event-sourcing-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Sourcing Tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/testing/integration-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integration Tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/testing/fixtures-and-patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fixtures and Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/domain-elements/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Domain Elements
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Domain Elements
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/domain-elements/element-decorators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Decorators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/domain-elements/object-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Object Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/domain-elements/identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/fields/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Fields
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Fields
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fields/defining-fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defining fields
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fields/simple-fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Simple Fields
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fields/container-fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Container Fields
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fields/association-fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Association Fields
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fields/arguments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Common Arguments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/configuration/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configuration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/cli/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    CLI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/cli/project/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Project
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5_2" id="__nav_4_5_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Project
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/project/new/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    protean new
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/project/discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain Discovery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/project/shell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    protean shell
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/project/docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    protean docs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/cli/runtime/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Runtime
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5_3" id="__nav_4_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Runtime
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/runtime/server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    protean server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/runtime/observatory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    protean observatory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/cli/data/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Data
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5_4" id="__nav_4_5_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/data/database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    protean db
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/data/events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    protean events
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/data/snapshot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    protean snapshot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/data/projection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    protean projection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/server/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Server
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/server/subscription-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Subscription Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/server/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Subscription Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/server/supervisor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Worker Mode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/server/observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/adapters/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Adapters
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Adapters
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/adapters/database/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Database
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7_2" id="__nav_4_7_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Database
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/adapters/database/postgresql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/adapters/database/elasticsearch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Elasticsearch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/adapters/broker/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Brokers
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7_3" id="__nav_4_7_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Brokers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/adapters/broker/inline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inline Broker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/adapters/broker/redis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Stream Broker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/adapters/broker/redis-pubsub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis PubSub Broker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/adapters/broker/custom-brokers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Brokers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/adapters/cache/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Caches
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7_4" id="__nav_4_7_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Caches
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/adapters/cache/redis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/adapters/eventstore/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Event Stores
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7_5" id="__nav_4_7_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Event Stores
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/adapters/eventstore/message-db/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Message DB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/type-checking/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Type Checking
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Type Checking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/testing/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/testing/pytest-plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pytest Plugin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/migration/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Migration
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Migration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/migration/v0-15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrating to 0.15
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/philosophy/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Philosophy & Principles
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Philosophy & Principles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/foundations/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Foundations
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Foundations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/foundations/ubiquitous-language/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ubiquitous Language
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/foundations/bounded-contexts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bounded Contexts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/foundations/analysis-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Analysis Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/foundations/identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/foundations/invariants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Invariants
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/foundations/changing-state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changing State
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/foundations/streams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Streams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/architecture/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Architecture Patterns
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture Patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/architecture/ddd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DDD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/architecture/cqrs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CQRS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/architecture/event-sourcing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Sourcing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/architecture/architecture-decision/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Choosing Between Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/building-blocks/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Building Blocks
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Building Blocks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/aggregates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Aggregates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/value-objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Value Objects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/domain-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Events
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/command-handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Handlers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/event-handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Handlers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/application-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/repositories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Repositories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/subscribers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Subscribers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/projections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Projections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/projectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Projectors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/building-blocks/process-managers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process Managers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/async-processing/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Async Processing
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Async Processing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/async-processing/engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Engine Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/async-processing/subscriptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Subscriptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/async-processing/outbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Outbox Pattern
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/async-processing/priority-lanes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Priority Lanes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/async-processing/stream-categories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Stream Categories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/ports-and-adapters/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Ports & Adapters
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Ports & Adapters
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/internals/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Internals
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Internals
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/internals/field-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Field system
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/internals/shadow-fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shadow fields
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/internals/query-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query system
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/internals/event-sourcing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Sourcing Internals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/internals/event-upcasting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Upcasting Internals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Patterns & Recipes
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Patterns & Recipes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Aggregate Design
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Aggregate Design
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../design-small-aggregates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Small Aggregates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../one-aggregate-per-transaction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    One Aggregate Per Transaction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encapsulate-state-changes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Encapsulate State Changes in Named Methods
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../replace-primitives-with-value-objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Replace Primitives with Value Objects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" checked>
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Event-Driven Patterns
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Event-Driven Patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Design Events for Consumers
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Events for Consumers
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Pattern
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Pattern">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-litmus-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Litmus Test
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delta-events-vs-fact-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delta Events vs Fact Events
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Delta Events vs Fact Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delta-events-what-changed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delta Events: What Changed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fact-events-complete-state-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fact Events: Complete State Snapshot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combining-both" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combining Both
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event-payload-design-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Payload Design Principles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Event Payload Design Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-include-identifiers-for-all-referenced-aggregates" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Include Identifiers for All Referenced Aggregates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-include-data-consumers-need-to-act" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Include Data Consumers Need to Act
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-include-cross-aggregate-data-at-event-time" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Include Cross-Aggregate Data at Event Time
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-dont-include-everything" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Don't Include Everything
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-events-are-immutable-contracts" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Events Are Immutable Contracts
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projection-driven-event-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        Projection-Driven Event Design
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Projection-Driven Event Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-define-the-projection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Define the Projection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-identify-what-data-each-event-must-carry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Identify What Data Each Event Must Carry
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-design-events-to-satisfy-the-projection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Design Events to Satisfy the Projection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-write-the-projector" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Write the Projector
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-cross-domain-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Cross-Domain Events
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-thin-events-are-acceptable" class="md-nav__link">
    <span class="md-ellipsis">
      
        When Thin Events Are Acceptable
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="When Thin Events Are Acceptable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#internal-framework-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Internal Framework Events
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#events-with-fact-event-fallback" class="md-nav__link">
    <span class="md-ellipsis">
      
        Events with Fact Event Fallback
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single-consumer-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single-Consumer Events
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Anti-Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Anti-Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-just-load-it-event" class="md-nav__link">
    <span class="md-ellipsis">
      
        The "Just Load It" Event
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-kitchen-sink-event" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Kitchen Sink Event
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposing-internal-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exposing Internal State
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../idempotent-event-handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Idempotent Event Handlers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../event-versioning-and-evolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event Versioning and Evolution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../command-idempotency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Idempotency
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../coordinating-long-running-processes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coordinating Long-Running Processes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture & Quality
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture & Quality
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../organize-by-domain-concept/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Organize by Domain Concept
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation-layering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation Layering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../thin-handlers-rich-domain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thin Handlers, Rich Domain
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing-domain-logic-in-isolation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Domain Logic in Isolation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Identity & Communication
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Identity & Communication
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-identities-early/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating Identities Early
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connect-concepts-across-domains/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connecting Concepts Across Bounded Contexts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../consuming-events-from-other-domains/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consuming Events from Other Domains
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sharing-event-classes-across-domains/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sharing Event Classes Across Domains
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Testing & Infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Testing & Infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dual-mode-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dual-Mode Testing with Memory and Real Adapters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setting-up-and-tearing-down-database-for-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setting Up and Tearing Down Databases for Tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running-migration-with-priority-lanes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Running Migrations Without Blocking Production
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../community/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Community
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Community
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/quality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quality Report
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/contributing/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setting up Protean locally
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/contributing/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Protean
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/contributing/adapters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building Adapters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Pattern
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Pattern">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-litmus-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Litmus Test
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delta-events-vs-fact-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delta Events vs Fact Events
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Delta Events vs Fact Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delta-events-what-changed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delta Events: What Changed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fact-events-complete-state-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fact Events: Complete State Snapshot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combining-both" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combining Both
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event-payload-design-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Payload Design Principles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Event Payload Design Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-include-identifiers-for-all-referenced-aggregates" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Include Identifiers for All Referenced Aggregates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-include-data-consumers-need-to-act" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Include Data Consumers Need to Act
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-include-cross-aggregate-data-at-event-time" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Include Cross-Aggregate Data at Event Time
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-dont-include-everything" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Don't Include Everything
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-events-are-immutable-contracts" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Events Are Immutable Contracts
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projection-driven-event-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        Projection-Driven Event Design
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Projection-Driven Event Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-define-the-projection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Define the Projection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-identify-what-data-each-event-must-carry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Identify What Data Each Event Must Carry
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-design-events-to-satisfy-the-projection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Design Events to Satisfy the Projection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-write-the-projector" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Write the Projector
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-cross-domain-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Cross-Domain Events
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-thin-events-are-acceptable" class="md-nav__link">
    <span class="md-ellipsis">
      
        When Thin Events Are Acceptable
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="When Thin Events Are Acceptable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#internal-framework-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Internal Framework Events
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#events-with-fact-event-fallback" class="md-nav__link">
    <span class="md-ellipsis">
      
        Events with Fact Event Fallback
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single-consumer-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single-Consumer Events
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Anti-Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Anti-Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-just-load-it-event" class="md-nav__link">
    <span class="md-ellipsis">
      
        The "Just Load It" Event
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-kitchen-sink-event" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Kitchen Sink Event
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposing-internal-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exposing Internal State
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                




  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../" class="md-path__link">
          
  <span class="md-ellipsis">
    Patterns & Recipes
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="./" class="md-path__link">
          
  <span class="md-ellipsis">
    Event-Driven Patterns
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="design-events-for-consumers">Design Events for Consumers</h1>
<h2 id="the-problem">The Problem</h2>
<p>A developer raises a domain event when an order is placed:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<p>The event carries just the order ID. Downstream, an event handler needs to
send a confirmation email:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">event_handler</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Notification</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NotificationEventHandler</span><span class="p">(</span><span class="n">BaseEventHandler</span><span class="p">):</span>

    <span class="nd">@handle</span><span class="p">(</span><span class="n">OrderPlaced</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_confirmation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">OrderPlaced</span><span class="p">):</span>
        <span class="c1"># Need customer email, name, items, total...</span>
        <span class="c1"># But the event only has order_id.</span>
        <span class="n">repo</span> <span class="o">=</span> <span class="n">current_domain</span><span class="o">.</span><span class="n">repository_for</span><span class="p">(</span><span class="n">Order</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">order_id</span><span class="p">)</span>

        <span class="c1"># Now send the email using order details</span>
        <span class="n">send_email</span><span class="p">(</span>
            <span class="n">to</span><span class="o">=</span><span class="n">order</span><span class="o">.</span><span class="n">customer_email</span><span class="p">,</span>  <span class="c1"># Wait, Order doesn&#39;t have email...</span>
            <span class="n">subject</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Order </span><span class="si">{</span><span class="n">order</span><span class="o">.</span><span class="n">order_id</span><span class="si">}</span><span class="s2"> confirmed&quot;</span><span class="p">,</span>
            <span class="n">body</span><span class="o">=</span><span class="n">format_order_details</span><span class="p">(</span><span class="n">order</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div>
<p>The handler must load the Order aggregate to get the data it needs. But the
Notification handler shouldn't know about the Order aggregate at all -- it's
in a different bounded context. Now a projector also needs the data:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">projector</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">OrderSummaryProjection</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderSummaryProjector</span><span class="p">(</span><span class="n">BaseProjector</span><span class="p">):</span>

    <span class="nd">@handle</span><span class="p">(</span><span class="n">OrderPlaced</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_order_placed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">OrderPlaced</span><span class="p">):</span>
        <span class="c1"># Again, need to load the Order to get details</span>
        <span class="n">repo</span> <span class="o">=</span> <span class="n">current_domain</span><span class="o">.</span><span class="n">repository_for</span><span class="p">(</span><span class="n">Order</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">order_id</span><span class="p">)</span>

        <span class="n">projection</span> <span class="o">=</span> <span class="n">OrderSummaryProjection</span><span class="p">(</span>
            <span class="n">order_id</span><span class="o">=</span><span class="n">order</span><span class="o">.</span><span class="n">order_id</span><span class="p">,</span>
            <span class="n">customer_name</span><span class="o">=</span><span class="n">order</span><span class="o">.</span><span class="n">customer_name</span><span class="p">,</span>  <span class="c1"># Need customer data too</span>
            <span class="n">total</span><span class="o">=</span><span class="n">order</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
            <span class="n">item_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">items</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">current_domain</span><span class="o">.</span><span class="n">repository_for</span><span class="p">(</span><span class="n">OrderSummaryProjection</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
</code></pre></div>
<p>Every consumer must load the aggregate. This creates a cascade of problems:</p>
<ul>
<li>
<p><strong>Coupling through queries.</strong> Every event consumer depends on the Order
  aggregate's structure. If Order's fields change, every consumer breaks.</p>
</li>
<li>
<p><strong>Performance degradation.</strong> Each consumer triggers a separate database
  query to load the same aggregate. With five consumers, a single event causes
  five aggregate loads.</p>
</li>
<li>
<p><strong>Cross-aggregate data access.</strong> The notification handler needs the customer's
  email, which lives on the Customer aggregate. Now it needs to load <em>two</em>
  aggregates -- Order and Customer -- to process one event.</p>
</li>
<li>
<p><strong>Event sourcing incompatibility.</strong> In an event-sourced system, the aggregate's
  current state may have advanced past the state at the time the event was raised.
  Loading the current aggregate gives you <em>today's</em> data, not the data at event
  time.</p>
</li>
<li>
<p><strong>Broken in async processing.</strong> When events are processed asynchronously (as
  they should be), the aggregate may have been modified between when the event
  was raised and when the handler runs. The handler loads stale or inconsistent
  data.</p>
</li>
</ul>
<p>The root cause: <strong>events carry references instead of data, forcing consumers
to query back to the source</strong>.</p>
<hr />
<h2 id="the-pattern">The Pattern</h2>
<p>Design events to carry <strong>enough context for consumers to act independently</strong>,
without querying back to the source aggregate.</p>
<div class="highlight"><pre><span></span><code>Thin event (anti-pattern):
  OrderPlaced { order_id }
   Consumer loads Order to get details
   Consumer loads Customer to get email
   Coupled, slow, fragile

Rich event (pattern):
  OrderPlaced { order_id, customer_id, customer_name, customer_email,
                items, total, placed_at }
   Consumer has everything it needs
   No queries, no coupling, no fragility
</code></pre></div>
<p>This doesn't mean events should contain the entire aggregate. It means events
should contain the data that <strong>consumers need to do their job</strong>.</p>
<h3 id="the-litmus-test">The Litmus Test</h3>
<p>For every event you design, ask:</p>
<blockquote>
<p>"Can every consumer of this event process it without loading any other
aggregate?"</p>
</blockquote>
<p>If the answer is no, the event is too thin. Add the data that consumers need.</p>
<hr />
<h2 id="delta-events-vs-fact-events">Delta Events vs Fact Events</h2>
<p>Protean supports two styles of events, and the choice affects how you design
event payloads.</p>
<h3 id="delta-events-what-changed">Delta Events: What Changed</h3>
<p>Delta events capture <strong>the specific change</strong> that occurred. They carry the data
relevant to that particular state transition:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_name</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_email</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">total</span><span class="p">:</span> <span class="n">Float</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">placed_at</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderShipped</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_email</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">tracking_number</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">carrier</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">shipped_at</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderItemAdded</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">product_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">product_name</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">quantity</span><span class="p">:</span> <span class="n">Integer</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">unit_price</span><span class="p">:</span> <span class="n">Float</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">new_total</span><span class="p">:</span> <span class="n">Float</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<p>Delta events are <strong>specific and intentional</strong>. Each event type carries exactly
the data relevant to that operation. This is the primary style for
hand-crafted domain events.</p>
<p><strong>When to use delta events:</strong></p>
<ul>
<li>When different consumers need different data for different events</li>
<li>When you want precise, minimal event payloads</li>
<li>When events represent meaningful business operations with specific data</li>
<li>When using event sourcing (events are the source of truth)</li>
</ul>
<h3 id="fact-events-complete-state-snapshot">Fact Events: Complete State Snapshot</h3>
<p>Fact events capture <strong>the aggregate's complete state</strong> after a change. Protean
can generate these automatically:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">fact_events</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Auto</span><span class="p">(</span><span class="n">identifier</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">HasMany</span><span class="p">(</span><span class="n">OrderItem</span><span class="p">)</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;draft&quot;</span><span class="p">)</span>
    <span class="n">total</span><span class="p">:</span> <span class="n">Float</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="c1"># ...</span>
</code></pre></div>
<p>With <code>fact_events=True</code>, Protean automatically raises a <code>OrderFactEvent</code> after
every successful persistence. The fact event contains the aggregate's complete
state as a snapshot.</p>
<p><strong>When to use fact events:</strong></p>
<ul>
<li>When consumers need the aggregate's full state (e.g., projections that
  mirror the aggregate)</li>
<li>When you want to avoid hand-crafting event payloads for every state change</li>
<li>When the projection essentially replicates the aggregate's structure</li>
<li>For simple CQRS patterns where the read model mirrors the write model</li>
</ul>
<p><strong>Trade-offs:</strong></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Delta Events</th>
<th>Fact Events</th>
</tr>
</thead>
<tbody>
<tr>
<td>Payload size</td>
<td>Small (only what changed)</td>
<td>Large (full state)</td>
</tr>
<tr>
<td>Semantic meaning</td>
<td>High (named operations)</td>
<td>Low (generic "changed")</td>
</tr>
<tr>
<td>Consumer logic</td>
<td>Process the specific change</td>
<td>Replace the entire state</td>
</tr>
<tr>
<td>Event versioning</td>
<td>Must evolve each event type</td>
<td>Evolves with the aggregate</td>
</tr>
<tr>
<td>Event sourcing</td>
<td>Required</td>
<td>Not suitable (no operation semantics)</td>
</tr>
<tr>
<td>Protean support</td>
<td>Hand-crafted</td>
<td>Auto-generated with <code>fact_events=True</code></td>
</tr>
</tbody>
</table>
<h3 id="combining-both">Combining Both</h3>
<p>You can use both delta and fact events on the same aggregate. Raise specific
delta events for meaningful operations, and let fact events provide a catch-all
for projections:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">fact_events</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="c1"># ... fields ...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">place</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;placed&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">placed_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="c1"># Delta event with specific operation semantics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raise_</span><span class="p">(</span><span class="n">OrderPlaced</span><span class="p">(</span>
            <span class="n">order_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">order_id</span><span class="p">,</span>
            <span class="n">customer_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">customer_id</span><span class="p">,</span>
            <span class="n">customer_email</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">customer_email</span><span class="p">,</span>
            <span class="n">items</span><span class="o">=</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">],</span>
            <span class="n">total</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
            <span class="n">placed_at</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">placed_at</span><span class="p">,</span>
        <span class="p">))</span>
        <span class="c1"># Fact event is also auto-raised on persistence</span>
</code></pre></div>
<p>Consumers that care about the specific operation listen for <code>OrderPlaced</code>.
Projections that just need the latest state listen for the fact event.</p>
<hr />
<h2 id="event-payload-design-principles">Event Payload Design Principles</h2>
<h3 id="1-include-identifiers-for-all-referenced-aggregates">1. Include Identifiers for All Referenced Aggregates</h3>
<p>Every aggregate that a consumer might need to correlate should have its
identity in the event:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>      <span class="c1"># This aggregate</span>
    <span class="n">customer_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>    <span class="c1"># Referenced aggregate</span>
    <span class="n">shipping_address_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">()</span>         <span class="c1"># Referenced aggregate</span>
</code></pre></div>
<p>Even if a consumer doesn't need all of them, including identifiers is cheap
and enables future consumers without changing the event.</p>
<h3 id="2-include-data-consumers-need-to-act">2. Include Data Consumers Need to Act</h3>
<p>Think about what each consumer does with this event:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Notification handler needs: customer_email, customer_name, order summary</span>
<span class="c1"># Projector needs: order details for the read model</span>
<span class="c1"># Loyalty handler needs: customer_id, total (to calculate points)</span>
<span class="c1"># Analytics handler needs: items, total, placed_at (for reporting)</span>

<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_name</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>      <span class="c1"># For notifications</span>
    <span class="n">customer_email</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>     <span class="c1"># For notifications</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>                <span class="c1"># For projections, analytics</span>
    <span class="n">total</span><span class="p">:</span> <span class="n">Float</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>              <span class="c1"># For loyalty, analytics</span>
    <span class="n">placed_at</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>        <span class="c1"># For analytics, projections</span>
</code></pre></div>
<h3 id="3-include-cross-aggregate-data-at-event-time">3. Include Cross-Aggregate Data at Event Time</h3>
<p>When the event references data from another aggregate, include a snapshot of
that data in the event. Don't force consumers to look it up:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">aggregate</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="c1"># ... fields ...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">customer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">customer_email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;placed&quot;</span>
        <span class="c1"># Include customer data in the event -- the handler passes it in</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raise_</span><span class="p">(</span><span class="n">OrderPlaced</span><span class="p">(</span>
            <span class="n">order_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">order_id</span><span class="p">,</span>
            <span class="n">customer_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">customer_id</span><span class="p">,</span>
            <span class="n">customer_name</span><span class="o">=</span><span class="n">customer_name</span><span class="p">,</span>
            <span class="n">customer_email</span><span class="o">=</span><span class="n">customer_email</span><span class="p">,</span>
            <span class="n">items</span><span class="o">=</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">],</span>
            <span class="n">total</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
            <span class="n">placed_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span>
        <span class="p">))</span>


<span class="nd">@domain</span><span class="o">.</span><span class="n">command_handler</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderCommandHandler</span><span class="p">(</span><span class="n">BaseCommandHandler</span><span class="p">):</span>

    <span class="nd">@handle</span><span class="p">(</span><span class="n">PlaceOrder</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">place_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="n">PlaceOrder</span><span class="p">):</span>
        <span class="c1"># Command carries the cross-aggregate data</span>
        <span class="n">repo</span> <span class="o">=</span> <span class="n">current_domain</span><span class="o">.</span><span class="n">repository_for</span><span class="p">(</span><span class="n">Order</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">order_id</span><span class="p">)</span>
        <span class="n">order</span><span class="o">.</span><span class="n">place</span><span class="p">(</span>
            <span class="n">customer_name</span><span class="o">=</span><span class="n">command</span><span class="o">.</span><span class="n">customer_name</span><span class="p">,</span>
            <span class="n">customer_email</span><span class="o">=</span><span class="n">command</span><span class="o">.</span><span class="n">customer_email</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">repo</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
</code></pre></div>
<p>The command carries the customer data because the caller (API layer) already
has it. The aggregate passes it into the event. No consumer needs to load the
Customer aggregate.</p>
<h3 id="4-dont-include-everything">4. Don't Include Everything</h3>
<p>Events should carry enough context, not the entire aggregate. Data that no
consumer needs should be omitted:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Too much -- includes internal implementation details</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">internal_processing_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">()</span>     <span class="c1"># Internal detail, no consumer needs this</span>
    <span class="n">database_version</span><span class="p">:</span> <span class="n">Integer</span><span class="p">()</span>           <span class="c1"># Infrastructure concern</span>
    <span class="n">raw_request_payload</span><span class="p">:</span> <span class="n">Dict</span><span class="p">()</span>           <span class="c1"># API concern, not domain</span>
</code></pre></div>
<p>The rule of thumb: include business data that consumers need, exclude
infrastructure details.</p>
<h3 id="5-events-are-immutable-contracts">5. Events Are Immutable Contracts</h3>
<p>Once an event is published and consumers depend on it, its fields become a
contract. Adding new fields is safe (existing consumers ignore them). Removing
or renaming fields is a breaking change.</p>
<p>Design events thoughtfully from the start, knowing that evolution is possible
but removal is painful.</p>
<hr />
<h2 id="projection-driven-event-design">Projection-Driven Event Design</h2>
<p>Projections are the most common event consumers. A practical approach to event
design is to <strong>work backward from the projection</strong>:</p>
<h3 id="step-1-define-the-projection">Step 1: Define the Projection</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">projection</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderSummaryProjection</span><span class="p">:</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">identifier</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_name</span><span class="p">:</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">item_count</span><span class="p">:</span> <span class="n">Integer</span><span class="p">()</span>
    <span class="n">total</span><span class="p">:</span> <span class="n">Float</span><span class="p">()</span>
    <span class="n">placed_at</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">()</span>
    <span class="n">shipped_at</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">()</span>
</code></pre></div>
<h3 id="step-2-identify-what-data-each-event-must-carry">Step 2: Identify What Data Each Event Must Carry</h3>
<p>For the projector to build this projection:</p>
<ul>
<li><code>OrderPlaced</code> must carry: order_id, customer_name, items (to count),
  total, placed_at</li>
<li><code>OrderShipped</code> must carry: order_id, shipped_at</li>
<li><code>OrderCancelled</code> must carry: order_id</li>
</ul>
<h3 id="step-3-design-events-to-satisfy-the-projection">Step 3: Design Events to Satisfy the Projection</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_name</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">total</span><span class="p">:</span> <span class="n">Float</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">placed_at</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderShipped</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">shipped_at</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<h3 id="step-4-write-the-projector">Step 4: Write the Projector</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@domain</span><span class="o">.</span><span class="n">projector</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">OrderSummaryProjection</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderSummaryProjector</span><span class="p">(</span><span class="n">BaseProjector</span><span class="p">):</span>

    <span class="nd">@handle</span><span class="p">(</span><span class="n">OrderPlaced</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_order_placed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">OrderPlaced</span><span class="p">):</span>
        <span class="c1"># No aggregate loading needed -- event has everything</span>
        <span class="n">projection</span> <span class="o">=</span> <span class="n">OrderSummaryProjection</span><span class="p">(</span>
            <span class="n">order_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">order_id</span><span class="p">,</span>
            <span class="n">customer_name</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">customer_name</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="s2">&quot;placed&quot;</span><span class="p">,</span>
            <span class="n">item_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">items</span><span class="p">),</span>
            <span class="n">total</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
            <span class="n">placed_at</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">placed_at</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">current_domain</span><span class="o">.</span><span class="n">repository_for</span><span class="p">(</span><span class="n">OrderSummaryProjection</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>

    <span class="nd">@handle</span><span class="p">(</span><span class="n">OrderShipped</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_order_shipped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">OrderShipped</span><span class="p">):</span>
        <span class="n">repo</span> <span class="o">=</span> <span class="n">current_domain</span><span class="o">.</span><span class="n">repository_for</span><span class="p">(</span><span class="n">OrderSummaryProjection</span><span class="p">)</span>
        <span class="n">projection</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">order_id</span><span class="p">)</span>
        <span class="n">projection</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;shipped&quot;</span>
        <span class="n">projection</span><span class="o">.</span><span class="n">shipped_at</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">shipped_at</span>
        <span class="n">repo</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
</code></pre></div>
<p>Every projector method works entirely from the event data. No aggregate loading,
no cross-boundary queries, no coupling.</p>
<hr />
<h2 id="handling-cross-domain-events">Handling Cross-Domain Events</h2>
<p>When events cross domain boundaries (consumed by another bounded context),
the payload design becomes even more critical. The consuming domain should
never need to query back to the producing domain.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In the Order domain: event published to the broker</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_email</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">total</span><span class="p">:</span> <span class="n">Float</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">currency</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">placed_at</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="c1"># In the Fulfillment domain: subscriber consumes the event</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">subscriber</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="s2">&quot;orders&quot;</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderEventsSubscriber</span><span class="p">(</span><span class="n">BaseSubscriber</span><span class="p">):</span>

    <span class="nd">@handle</span><span class="p">(</span><span class="n">OrderPlaced</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_order_placed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">OrderPlaced</span><span class="p">):</span>
        <span class="c1"># The subscriber can act entirely from the event data</span>
        <span class="c1"># No need to call back to the Order domain</span>
        <span class="n">current_domain</span><span class="o">.</span><span class="n">process</span><span class="p">(</span>
            <span class="n">CreateShipment</span><span class="p">(</span>
                <span class="n">order_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">order_id</span><span class="p">,</span>
                <span class="n">customer_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">customer_id</span><span class="p">,</span>
                <span class="n">items</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">items</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
</code></pre></div>
<p>If the event doesn't carry enough data, the Fulfillment domain must call back
to the Order domain's API, creating runtime coupling between domains that
should be autonomous.</p>
<hr />
<h2 id="when-thin-events-are-acceptable">When Thin Events Are Acceptable</h2>
<h3 id="internal-framework-events">Internal Framework Events</h3>
<p>Events used purely for internal framework mechanics (e.g., triggering a
projection rebuild) can be thin:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Internal trigger -- no external consumers</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderProjectionStale</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<h3 id="events-with-fact-event-fallback">Events with Fact Event Fallback</h3>
<p>If you use <code>fact_events=True</code> on the aggregate, delta events can be thinner
because consumers that need full state can listen for the fact event instead:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Thin delta event for specific consumers</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderCancelled</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">reason</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Consumers that need full order state use the OrderFactEvent instead</span>
</code></pre></div>
<h3 id="single-consumer-events">Single-Consumer Events</h3>
<p>If an event has exactly one consumer and that consumer is in the same bounded
context, a thin event with an aggregate lookup is a pragmatic choice. But
consider that consumers may be added later.</p>
<hr />
<h2 id="anti-patterns">Anti-Patterns</h2>
<h3 id="the-just-load-it-event">The "Just Load It" Event</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Anti-pattern: event that&#39;s useless without a query</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># That&#39;s it. Every consumer must load the Order aggregate.</span>
</code></pre></div>
<h3 id="the-kitchen-sink-event">The Kitchen Sink Event</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Anti-pattern: event with every field from the aggregate</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">customer_name</span><span class="p">:</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">customer_email</span><span class="p">:</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">customer_phone</span><span class="p">:</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">customer_address</span><span class="p">:</span> <span class="n">Dict</span><span class="p">()</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">()</span>
    <span class="n">item_count</span><span class="p">:</span> <span class="n">Integer</span><span class="p">()</span>          <span class="c1"># Derivable from items</span>
    <span class="n">total</span><span class="p">:</span> <span class="n">Float</span><span class="p">()</span>
    <span class="n">subtotal</span><span class="p">:</span> <span class="n">Float</span><span class="p">()</span>              <span class="c1"># Derivable from items</span>
    <span class="n">tax</span><span class="p">:</span> <span class="n">Float</span><span class="p">()</span>                   <span class="c1"># Derivable from total - subtotal</span>
    <span class="n">discount</span><span class="p">:</span> <span class="n">Float</span><span class="p">()</span>
    <span class="n">coupon_code</span><span class="p">:</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">internal_notes</span><span class="p">:</span> <span class="n">String</span><span class="p">()</span>       <span class="c1"># No consumer needs this</span>
    <span class="n">created_by_admin</span><span class="p">:</span> <span class="n">Boolean</span><span class="p">()</span>    <span class="c1"># Internal flag</span>
    <span class="c1"># ... 20 more fields</span>
</code></pre></div>
<p>Include what consumers need, not everything the aggregate has. Derivable
fields (item_count from items, subtotal from items) are noise.</p>
<h3 id="exposing-internal-state">Exposing Internal State</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Anti-pattern: leaking implementation details</span>
<span class="nd">@domain</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">part_of</span><span class="o">=</span><span class="n">Order</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OrderPlaced</span><span class="p">(</span><span class="n">BaseEvent</span><span class="p">):</span>
    <span class="n">order_id</span><span class="p">:</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">state_machine_state</span><span class="p">:</span> <span class="n">String</span><span class="p">()</span>   <span class="c1"># Internal implementation detail</span>
    <span class="n">_version</span><span class="p">:</span> <span class="n">Integer</span><span class="p">()</span>             <span class="c1"># Framework concern</span>
    <span class="n">retry_count</span><span class="p">:</span> <span class="n">Integer</span><span class="p">()</span>          <span class="c1"># Infrastructure concern</span>
</code></pre></div>
<p>Events are part of your domain's public contract. They should contain
business-meaningful data, not implementation details.</p>
<hr />
<h2 id="summary">Summary</h2>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Thin Events</th>
<th>Rich Events</th>
</tr>
</thead>
<tbody>
<tr>
<td>Consumer independence</td>
<td>Low (must query back)</td>
<td>High (self-contained)</td>
</tr>
<tr>
<td>Cross-domain coupling</td>
<td>High (consumers depend on source)</td>
<td>Low (consumers are autonomous)</td>
</tr>
<tr>
<td>Performance</td>
<td>Poor (N queries per event)</td>
<td>Good (no extra queries)</td>
</tr>
<tr>
<td>Event sourcing fit</td>
<td>Poor (state at event time lost)</td>
<td>Good (snapshot at event time)</td>
</tr>
<tr>
<td>Payload size</td>
<td>Small</td>
<td>Larger</td>
</tr>
<tr>
<td>Design effort</td>
<td>Low (just the ID)</td>
<td>Higher (think about consumers)</td>
</tr>
<tr>
<td>Evolution cost</td>
<td>Low (nothing to change)</td>
<td>Higher (more fields to maintain)</td>
</tr>
</tbody>
</table>
<p>The principle: <strong>design events so that every consumer can process them
independently. Include enough context for consumers to act without querying
back to the source aggregate. Work backward from the projection to determine
what data each event must carry.</strong></p>
<hr />
<div class="admonition tip">
<p class="admonition-title">Related reading</p>
<p><strong>Concepts:</strong></p>
<ul>
<li><a href="../../concepts/building-blocks/events/">Events</a>  Domain events and their role in the system.</li>
<li><a href="../../concepts/building-blocks/projections/">Projections</a>  Read-optimized views built from events.</li>
</ul>
<p><strong>Guides:</strong></p>
<ul>
<li><a href="../../guides/domain-definition/events/">Events</a>  Defining events, structure, and metadata.</li>
<li><a href="../../guides/domain-behavior/raising-events/">Raising Events</a>  Raising and dispatching events from aggregates.</li>
<li><a href="../../guides/consume-state/projections/">Projections</a>  Building read models with projectors.</li>
</ul>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../replace-primitives-with-value-objects/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Replace Primitives with Value Objects">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Replace Primitives with Value Objects
              </div>
            </div>
          </a>
        
        
          
          <a href="../idempotent-event-handlers/" class="md-footer__link md-footer__link--next" aria-label="Next: Idempotent Event Handlers">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Idempotent Event Handlers
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019 - 2026 Subhash Bhushan
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.expand", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../assets/external/unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
      
        <script src="../../javascripts/mermaid-init.js"></script>
      
    
  </body>
</html>